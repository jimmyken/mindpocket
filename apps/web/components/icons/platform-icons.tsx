import type { SVGProps } from "react"
import { Tooltip, TooltipContent, TooltipTrigger } from "@/components/ui/tooltip"

type IconProps = SVGProps<SVGSVGElement>

function WechatIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.098 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.811-.05a6.127 6.127 0 0 1-.253-1.736c0-3.678 3.39-6.66 7.57-6.66.418 0 .83.042 1.234.1C17.188 4.473 13.327 2.188 8.69 2.188zM5.785 5.99a1.09 1.09 0 0 1 1.083 1.09 1.09 1.09 0 0 1-1.083 1.09A1.09 1.09 0 0 1 4.7 7.08a1.09 1.09 0 0 1 1.085-1.09zm5.774 0a1.09 1.09 0 0 1 1.083 1.09 1.09 1.09 0 0 1-1.083 1.09 1.09 1.09 0 0 1-1.084-1.09 1.09 1.09 0 0 1 1.084-1.09zM16.818 9.2c-3.625 0-6.567 2.55-6.567 5.693 0 3.145 2.942 5.694 6.567 5.694.725 0 1.42-.108 2.076-.3a.717.717 0 0 1 .59.083l1.395.814a.27.27 0 0 0 .138.044c.13 0 .238-.108.238-.243 0-.06-.023-.118-.039-.174l-.285-1.083a.484.484 0 0 1 .174-.546c1.507-1.11 2.468-2.755 2.468-4.589 0-3.143-2.942-5.693-6.567-5.693h-.188zm-2.155 3.17a.899.899 0 1 1 0 1.798.899.899 0 0 1 0-1.798zm4.31 0a.899.899 0 1 1 0 1.798.899.899 0 0 1 0-1.798z" />
    </svg>
  )
}

function XiaohongshuIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.187 13.235h-1.792v4.456h-1.47v-4.456h-1.28v4.456h-1.47v-2.99H9.67v2.99H8.2v-4.456H6.813v-1.28H8.2V7.5h1.47v4.456h1.505V7.5h1.47v2.99h1.28V7.5h1.47v4.456h1.792v1.28z" />
    </svg>
  )
}

function ZhihuIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M5.721 0C2.251 0 0 2.25 0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75 0 18.281 0zm1.964 4.078h5.36c.022-.338.022-.676 0-1.012h-5.36c-.338 0-.676.338-.676.676v.336h.676zm8.73 1.688L13.87 9.16h2.545v5.36H11.52v1.012h4.896v1.688H11.52v2.7h-1.688v-2.7H4.936v-1.688h4.896V14.52H4.936V9.16h2.545L4.936 5.766h1.688l2.545 3.394h.336V5.766h1.688v3.394h.336l2.545-3.394zM6.624 10.172v3.336h3.208v-3.336zm4.896 0v3.336h3.208v-3.336z" />
    </svg>
  )
}

function TwitterIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
    </svg>
  )
}

function GithubIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
    </svg>
  )
}

function YoutubeIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12z" />
    </svg>
  )
}

function BilibiliIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M17.813 4.653h.854c1.51.054 2.769.578 3.773 1.574 1.004.995 1.524 2.249 1.56 3.76v7.36c-.036 1.51-.556 2.769-1.56 3.773s-2.262 1.524-3.773 1.56H5.333c-1.51-.036-2.769-.556-3.773-1.56S.036 18.858 0 17.347v-7.36c.036-1.511.556-2.765 1.56-3.76 1.004-.996 2.262-1.52 3.773-1.574h.774l-1.174-1.12a1.234 1.234 0 0 1-.373-.906c0-.356.124-.658.373-.907l.027-.027c.267-.249.573-.373.92-.373.347 0 .653.124.92.373L9.653 4.44c.071.071.134.142.187.213h4.267a.836.836 0 0 1 .16-.213l2.853-2.747c.267-.249.573-.373.92-.373.347 0 .662.151.929.4.267.249.391.551.391.907 0 .355-.124.657-.373.906zM5.333 7.24c-.746.018-1.373.276-1.88.773-.506.498-.769 1.13-.786 1.894v7.52c.017.764.28 1.395.786 1.893.507.498 1.134.756 1.88.773h13.334c.746-.017 1.373-.275 1.88-.773.506-.498.769-1.129.786-1.893v-7.52c-.017-.765-.28-1.396-.786-1.894-.507-.497-1.134-.755-1.88-.773zM8 11.107c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c.017-.391.15-.711.4-.96.249-.249.56-.373.933-.373zm8 0c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c.017-.391.15-.711.4-.96.249-.249.56-.373.933-.373z" />
    </svg>
  )
}

function MediumIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M13.54 12a6.8 6.8 0 0 1-6.77 6.82A6.8 6.8 0 0 1 0 12a6.8 6.8 0 0 1 6.77-6.82A6.8 6.8 0 0 1 13.54 12zM20.96 12c0 3.54-1.51 6.42-3.38 6.42-1.87 0-3.39-2.88-3.39-6.42s1.52-6.42 3.39-6.42 3.38 2.88 3.38 6.42M24 12c0 3.17-.53 5.75-1.19 5.75-.66 0-1.19-2.58-1.19-5.75s.53-5.75 1.19-5.75C23.47 6.25 24 8.83 24 12z" />
    </svg>
  )
}

function RedditIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M12 0C5.373 0 0 5.373 0 12c0 6.627 5.373 12 12 12s12-5.373 12-12c0-6.627-5.373-12-12-12zm6.066 13.29c.058.33.088.665.088 1.003 0 3.407-3.97 6.168-8.87 6.168S.414 17.7.414 14.293c0-.338.03-.673.088-1.003a1.74 1.74 0 0 1-.632-1.34c0-.96.78-1.74 1.74-1.74.448 0 .857.17 1.165.45 1.15-.787 2.73-1.293 4.49-1.363l.84-3.96.018-.036a.3.3 0 0 1 .36-.222l2.81.6a1.238 1.238 0 1 1-.134.594l-2.49-.532-.756 3.558c1.73.08 3.28.586 4.41 1.363a1.737 1.737 0 0 1 2.905 1.29c0 .524-.232.993-.598 1.33zM8.727 13.06c-.96 0-1.74.78-1.74 1.74 0 .96.78 1.74 1.74 1.74.96 0 1.74-.78 1.74-1.74 0-.96-.78-1.74-1.74-1.74zm6.546 0c-.96 0-1.74.78-1.74 1.74 0 .96.78 1.74 1.74 1.74.96 0 1.74-.78 1.74-1.74 0-.96-.78-1.74-1.74-1.74zm-5.077 4.8a.3.3 0 0 1 .424 0c.617.617 1.524.93 2.396.93.87 0 1.778-.313 2.396-.93a.3.3 0 1 1 .424.424c-.735.735-1.8 1.106-2.82 1.106s-2.085-.37-2.82-1.106a.3.3 0 0 1 0-.424z" />
    </svg>
  )
}

function JuejinIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M12 14.316l7.454-5.88-2.022-1.625L12 11.1 6.568 6.81 4.546 8.435 12 14.316zm0-8.475l2.456 1.94 2.022-1.624L12 2.217 7.522 6.157l2.022 1.624L12 5.841zM4.546 11.88 12 17.76l7.454-5.88-2.022-1.625L12 14.544l-5.432-4.29-2.022 1.626zM12 21.783l7.454-5.88-2.022-1.626L12 18.567l-5.432-4.29-2.022 1.626L12 21.783z" />
    </svg>
  )
}

function NotionIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M4.459 4.208c.746.606 1.026.56 2.428.466l13.215-.793c.28 0 .047-.28-.046-.326L18.29 2.14c-.467-.373-.746-.56-1.586-.466l-12.77.793c-.467.047-.56.28-.373.466zm.793 3.08v13.904c0 .747.373 1.027 1.214.98l14.523-.84c.84-.046.933-.56.933-1.166V6.354c0-.606-.233-.933-.746-.886l-15.177.84c-.56.047-.747.327-.747.98zm14.337.745c.093.42 0 .84-.42.888l-.7.14v10.264c-.608.327-1.168.514-1.635.514-.747 0-.933-.234-1.494-.933l-4.577-7.186v6.952l1.448.327s0 .84-1.168.84l-3.222.186c-.093-.186 0-.653.327-.746l.84-.233V9.854L7.822 9.76c-.094-.42.14-1.026.793-1.073l3.456-.233 4.764 7.279v-6.44l-1.215-.14c-.093-.514.28-.886.747-.933zM1.936 1.035l13.31-.98c1.634-.14 2.054-.047 3.082.7l4.249 2.986c.7.513.933.653.933 1.213v16.378c0 1.026-.373 1.634-1.68 1.726l-15.458.934c-.98.047-1.448-.093-1.962-.747l-3.129-4.06c-.56-.747-.793-1.306-.793-1.96V2.667c0-.839.374-1.54 1.448-1.632z" />
    </svg>
  )
}

function ArxivIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M20.744 2.672L14.456 12l6.288 9.328H16.6L12 14.64 7.4 21.328H3.256L9.544 12 3.256 2.672H7.4L12 9.36l4.6-6.688z" />
    </svg>
  )
}

function StackoverflowIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M15.725 0l-1.72 1.277 6.39 8.588 1.72-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.905-1.94-9.702-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154z" />
    </svg>
  )
}

function JianshuIcon(props: IconProps) {
  return (
    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" {...props}>
      <path d="M5.763 2.118a.6.6 0 0 0-.6.6v18.564a.6.6 0 0 0 .6.6h12.474a.6.6 0 0 0 .6-.6V2.718a.6.6 0 0 0-.6-.6zm1.2 1.8h10.074v16.164H6.963zm1.8 2.4v1.2h6.474v-1.2zm0 3v1.2h6.474v-1.2zm0 3v1.2h6.474v-1.2z" />
    </svg>
  )
}

const PLATFORM_CONFIG: Record<
  string,
  { icon: (props: IconProps) => React.JSX.Element; label: string; color: string }
> = {
  wechat: { icon: WechatIcon, label: "微信公众号", color: "text-green-600" },
  xiaohongshu: { icon: XiaohongshuIcon, label: "小红书", color: "text-red-500" },
  zhihu: { icon: ZhihuIcon, label: "知乎", color: "text-blue-600" },
  twitter: { icon: TwitterIcon, label: "X / Twitter", color: "text-foreground" },
  github: { icon: GithubIcon, label: "GitHub", color: "text-foreground" },
  youtube: { icon: YoutubeIcon, label: "YouTube", color: "text-red-600" },
  bilibili: { icon: BilibiliIcon, label: "哔哩哔哩", color: "text-sky-500" },
  medium: { icon: MediumIcon, label: "Medium", color: "text-foreground" },
  reddit: { icon: RedditIcon, label: "Reddit", color: "text-orange-500" },
  juejin: { icon: JuejinIcon, label: "掘金", color: "text-blue-500" },
  jianshu: { icon: JianshuIcon, label: "简书", color: "text-red-400" },
  notion: { icon: NotionIcon, label: "Notion", color: "text-foreground" },
  arxiv: { icon: ArxivIcon, label: "arXiv", color: "text-red-700" },
  stackoverflow: { icon: StackoverflowIcon, label: "Stack Overflow", color: "text-orange-500" },
}

export function hasPlatformIcon(platform: string | null): boolean {
  return !!platform && platform in PLATFORM_CONFIG
}

export function PlatformIcon({ platform, className }: { platform: string; className?: string }) {
  const config = PLATFORM_CONFIG[platform]
  if (!config) return null

  const Icon = config.icon

  return (
    <Tooltip>
      <TooltipTrigger asChild>
        <Icon className={className ?? `size-3.5 shrink-0 ${config.color}`} />
      </TooltipTrigger>
      <TooltipContent>{config.label}</TooltipContent>
    </Tooltip>
  )
}
